# ç¬¬å››ç«  :åŸºç¤å‹•æ…‹è¦åŠƒ

å‹•æ…‹è¦åŠƒæœ€é‡è¦çš„å°±æ˜¯ç·´ç¿’ï¼Œè€Œä¸”ç·´ç¿’å‹•æ…‹è¦åŠƒçš„CPå€¼å¾ˆé«˜ï¼Œå› ç‚ºå¾ˆå¤šå¤§å‹è€ƒè©¦å¤§éƒ¨åˆ†éƒ½æœ‰è¶…éä¸€é¡Œã€‚

å‹•æ…‹è¦åŠƒç°¡ç¨± $DP$ $(Dynamic-Programing)$ ï¼Œä¹Ÿè¢«ç¨±ç‚ºã€Œè¨˜æ†¶åŒ–éè¿´ã€ï¼Œå®ƒçš„æ ¸å¿ƒæƒ³æ³•å°±æ˜¯$$ä¸è¦é‡è¤‡è¨ˆç®—ï¼ŒæŠŠä¹‹å‰ç®—éçš„ç´€éŒ„ä¸‹ä¾†ï¼Œä»¥ç©ºé–“æ›å–æ™‚é–“ã€‚$$

$DP$ èˆ‡åˆ†æ²»çš„æ¦‚å¿µå¾ˆåƒï¼Œéƒ½æ˜¯æŠŠå•é¡Œç”±å°è€Œå¤§çš„è¨ˆç®—ï¼Œå…ˆæŠŠå•é¡ŒåŠƒåˆ†æˆå­å•é¡Œå†åˆä½µå­å•é¡Œçš„ç­”æ¡ˆè®Šæˆæœ€å¾Œçš„ç­”æ¡ˆï¼Œç¸½å…±æœ‰3å€‹æ­¥é©Ÿ : 
> 1. å®šç¾©å­å•é¡Œã€‚
> 2. æ‰¾åˆ°å•é¡Œèˆ‡å­å•é¡Œä¹‹é–“çš„é—œä¿‚ã€‚
> 3. æ‰¾åˆ°è¨ˆç®—å­å•é¡Œçš„é †åºï¼Œä¾†é¿å…é‡è¤‡è¨ˆç®—é‡è¤‡çš„ã€‚


## ä¾‹é¡Œ : è²»æ°æ•¸åˆ—
> è²»æ°æ•¸åˆ—ç¬¬$0$é …å®šç¾©ç‚º$0$ï¼Œç¬¬$1, 2$é …éƒ½å®šç¾©ç‚º$1$ï¼Œæ±‚è²»æ°æ•¸åˆ—çš„ç¬¬$n$é …$\bmod10^9+7$ã€‚
> $1 \le n \le 10^6$

å¦‚æœæˆ‘å€‘ä»¥éè¿´é—œä¿‚å¼è¡¨ç¤º:
> $$
> F_i = 
> \begin{cases}
> 1 & \text{if } i=1 \text{ or } 2\\
> F_{i-1} + F_{i-2} & \text{otherwise}
> \end{cases}
> $$

æ›æˆç¨‹å¼å°±è®Šæˆ
```cpp=
#include<bits/stdc++.h>
using namespace std;
const int mod=1e9+7;
int f(int n) {
    if(n<3) return 1;
    return f(n-1)+f(n-2)%mod;
}
```
æ ¹æ“šæˆ‘å€‘åœ¨éè¿´ä¸Šçš„ï¼Œåœ¨ $n=5$ æ™‚å¯ä»¥ç•«æˆä¸‹åœ–ï¼Œå¯ä»¥ç™¼ç¾å®ƒåœ¨ $n=3$ æ™‚é‡è¤‡è¨ˆç®—äº†ï¼Œæ™‚é–“è¤‡é›œåº¦å…¶å¯¦ä¸æ˜¯ $O(n)$ï¼Œè€Œæ˜¯å¯æ€•çš„ $O(1.6^n)$ï¼Œå› æ­¤æ ¹æ“š $DP$ çš„æƒ³æ³•ï¼Œæˆ‘å€‘å¯ä»¥æŠŠå·²ç¶“è¨ˆç®—éçš„ç´€éŒ„ä¸‹ä¾†ï¼Œå°±å¯ä»¥é¿å…å¤šé¤˜çš„è¨ˆç®—ã€‚
![image](https://hackmd.io/_uploads/HyCzi1Z8yg.png)

æ‰€ä»¥æˆ‘å€‘å¯ä»¥ç”¨é™£åˆ—ç´€éŒ„è²»æ°æ•¸åˆ—çš„æ¯ä¸€é …ï¼Œä¹Ÿå°±æ˜¯ã€Œè¨˜æ†¶åŒ–éè¿´ã€çš„ç²¾éš¨ï¼Œé¿å…é‡è¤‡è¨ˆç®—ï¼Œç¨‹å¼ç¢¼å¦‚ä¸‹ã€‚
```cpp=
#include<bits/stdc++.h>
using namespace std;
#define int long long
const int mod=1e9+7;
int dp[1000010];
int f(int n) {
    if(n<3) return 1;
    if(dp[n]!=-1) return dp[n];
    return dp[n]=(f(n-1)+f(n-2))%mod;
}
signed main() {
    int n;
    cin>>n;
    for(int i=0;i<=n;i++) dp[i]=-1;
    cout<<f(n);
}
```
## $Top-down$ && $Bottom-up$
é€™æ¨£ç”±ä¸Šè€Œä¸‹åš $DP$ï¼Œè¨ˆç®—åˆ°å“ªä¸€é …å†å»çœ‹æ˜¯å¦è¨ˆç®—éçš„æ–¹æ³•åˆè¢«ç¨±ç‚º $Top-down$ çš„ $DP$ ï¼Œèˆ‡ä¹‹ç›¸å°çš„ä¾¿æ˜¯ $Bottom-up$ çš„ $DP$ã€‚
$Bottom-up$ åœ¨ä¸­åœ‹è¢«ç¨±ç‚ºã€Œåš´æ ¼ä½ç½®ä¾è³´ã€ï¼Œä¹Ÿå°±æ˜¯å¦‚æœè¦è¨ˆç®— $DP$ ä¸­çš„ä»»ä½•ä¸€é …ï¼Œå®ƒæ‰€éœ€è¦çš„æ¯ä¸€é …éƒ½éœ€è¦è¢«è¨ˆç®—éï¼Œåƒæ˜¯å¦‚æœè¦æŠŠä¸Šé¢çš„ç¨‹å¼ç¢¼è½‰æˆ $Bottom-up$ çš„ $DP$ å¯ä»¥è½‰æˆä¸‹é¢çš„ç¨‹å¼ç¢¼ã€‚
```cpp=
#include<bits/stdc++.h>
using namespace std;
#define int long long
const int mod=1e9+7;
int dp[1000010];
signed main() {
    int n;
    cin>>n;
    dp[1]=dp[2]=1;
    for(int i=3;i<=n;i++) {
        dp[i]=(dp[i-1]+dp[i-2])%mod;//ç¢ºå®šéƒ½è¨ˆç®—éäº†ï¼Œæ ¹æ“šéè¿´å¼ã€‚
    }
    cout<<dp[n];
}
```

$9\sim 12$è¡Œçš„ç¨‹å¼è·Ÿéè¿´å¼å¹¾ä¹ä¸€æ¨£åªæ˜¯æ”¹æˆä½¿ç”¨è¿´åœˆè€Œä¸æ˜¯éè¿´ï¼Œé‚„æœ‰$n \sim 1$æ”¹æˆç”±$1\sim n$

### å¯¦ä½œæ¯”è¼ƒ
#### $Top-down$
* æ‰¾åˆ°éè¿´å¼å°±å¯ä»¥ç›´æ¥å¯¦ä½œã€‚
* é€šå¸¸ä½¿ç”¨éè¿´ï¼Œé€Ÿåº¦ç›¸å°æ…¢ï¼Œè€Œä¸”è¦æ³¨æ„éè¿´çš„æ·±åº¦ã€‚

#### $Bottom-up$
* è¦ç¢ºå®šæ‰€æœ‰å•é¡Œè¨ˆç®—å‰ï¼Œå®ƒçš„å­å•é¡Œå·²ç¶“è¨ˆç®—å¥½äº†ã€‚
* é€šå¸¸ä½¿ç”¨è¿´åœˆï¼Œé€Ÿåº¦ç›¸å°å¿«ã€‚

**é€šå¸¸ä½¿ç”¨$Bottom-up$**
## åè©ä»‹ç´¹
### ç‹€æ…‹
ä¸€å€‹ç‹€æ…‹å°±æ˜¯ç”¨ä¸€äº›åƒæ•¸æ±ºå®šä¸€å€‹å­å•é¡Œï¼Œå®šç‹€æ…‹å°±æ˜¯ç’‡å‰‡å­å•é¡Œéœ€è¦ç´€éŒ„å“ªäº›åƒæ•¸ã€‚
### è½‰ç§»
è½‰ç§»æŒ‡çš„å°±æ˜¯ç‹€æ…‹èˆ‡ç‹€æ…‹é–“çš„é—œä¿‚ï¼Œèˆ‡éè¿´çš„æ–¹å‘ç›¸åï¼Œç”±å°å•é¡Œè²¢ç»åˆ°å¤§å•é¡Œ 
e.g å¾ $dp_{i-2}$ å’Œ $dp_{i-1}$ è½‰ç§»åˆ° $dp_i$ã€‚
### $xDyD$
$n$ æ˜¯è³‡æ–™é‡ã€‚
$xDyD$ çš„æ„æ€å°±æ˜¯ç¸½å…±æœ‰ $n^x$ å€‹ç‹€æ…‹ï¼Œæ¯å€‹ç‹€æ…‹æœƒéœ€è¦ $n^y$ å€‹å­ç‹€æ…‹ã€‚
e.g è²»æ°æ•¸åˆ— $f_i=f_{i-1}+f_{i-2}$ï¼Œç¸½å…±æœ‰ $n$ å€‹ç‹€æ…‹ï¼Œæ¯å€‹ç‹€æ…‹éœ€è¦ $2$ å€‹å­ç‹€æ…‹ï¼Œæ‰€ä»¥å°±æ˜¯ $1D0D$ ï¼Œä¸€å€‹ $xDyD$ çš„ $DP$ çš„æ™‚é–“è¤‡é›œåº¦æ˜¯ $O(n^{x+y})$
## $Bottom-up$çš„å¯¦ä½œ
### pull
* å°±æ˜¯ç”¨ã€Œæ‹‰ã€çš„
 
å»æ‰¾æ¯å€‹ç‹€æ…‹éœ€è¦ç”±å“ªäº›ç‹€æ…‹è½‰ç§»
e.g. 
```cpp=
dp[1]=1, dp[2]=1;
for(int i=3;i<=n;i++) {
    dp[i]=dp[i-1]+dp[i-2];
}
```
### push
* å°±æ˜¯ç”¨ã€Œæ¨ã€çš„
 
å»æ‰¾æ¯å€‹ç‹€æ…‹å¯ä»¥è½‰ç§»åˆ°å“ªäº›ç‹€æ…‹
e.g. 
```cpp=
dp[1]=1, dp[2]=1;
for(int i=1;i<=n;i++) {
    if(i==1) dp[i+1]+=dp[i];
    else {
        dp[i+1]+=dp[i];
        dp[i+2]+=dp[i];
    }
}
```
## ä¾‹é¡Œ [vacation](https://judge.cchs.chc.edu.tw/ShowProblem?problemid=a560)

[åŸé¡Œ](https://atcoder.jp/contests/dp/tasks/dp_c)
>Kzzzå·¨ç ²ä»Šå¹´ç•¶ä¸Šåœ‹æ‰‹äº†ï¼Œä¿é€å°å¤§çš„ä»–è¦ºå¾—æš‘å‡å¥½ç„¡èŠï¼Œæ–¼æ˜¯ä»–æ±ºå®šå»æ¸¸æ³³ï¼Œè·Ÿæœ‹å‹å‡ºé–€æˆ–ç‚ºäº†ä¹‹å¾Œçš„ICPC RK.1ç¹¼çºŒåˆ·é¡Œï¼Œæš‘å‡ç¸½å…±æœ‰$N$å¤©ï¼Œæ¯å¤©éƒ½ä¸èƒ½åšè·Ÿæ˜¨å¤©ä¸€æ¨£çš„äº‹ï¼Œæ¯å¤©åšæ¯ä¸€ä»¶äº‹éƒ½æœ‰å°æ‡‰çš„å¿«æ¨‚åº¦$a_iï¼Œb_iï¼Œc_i$ï¼Œè«‹è¼¸å‡ºåœ¨æš‘å‡çµæŸä»–èƒ½ç²å¾—çš„æœ€å¤§å¿«æ¨‚åº¦ã€‚
$1 \le N \le 10^5$


æˆ‘å€‘å¯ä»¥ç™¼ç¾å¦‚æœç¬¬$i$å¤©é¸æ“‡è¦æ¸¸æ³³é‚£ç¬¬$i-1$å¤©å°±ä¸èƒ½æ¸¸æ³³ï¼Œä¹Ÿå°±æ˜¯ç¬¬$i-1$å¤©åªèƒ½åˆ·é¡Œæˆ–è·Ÿæœ‹å‹å‡ºé–€æ‰€ä»¥æˆ‘å€‘å¯ä»¥å®šç¾©
> $x_i$ ç‚ºç¬¬ $i$ å¤©æ¸¸æ³³æ‰€èƒ½ç²å¾—çš„æœ€å¤§å¿«æ¨‚åº¦ï¼Œ$x_1=a_1$ã€‚
> $y_i$ ç‚ºç¬¬ $i$ å¤©è·Ÿæœ‹å‹å‡ºé–€æ‰€èƒ½ç²å¾—çš„æœ€å¤§å¿«æ¨‚åº¦ï¼Œ$y_1=b_1$ã€‚
> $z_i$ ç‚ºç¬¬ $i$ å¤©åˆ·é¡Œæ‰€èƒ½ç²å¾—çš„æœ€å¤§å¿«æ¨‚åº¦ï¼Œ$z_1=c_1$ã€‚

é€™é¡Œçš„éè¿´å¼å°±å¯ä»¥åˆ—æˆé€™æ¨£ : 
> $x_i=\max(y_{i-1}, z_{i-1})+a_i$
> $y_i=\max(x_{i-1}, z_{i-1})+b_i$ 
> $z_i=\max(x_{i-1}, y_{i-1})+c_i$

:::spoiler AC-CODE
```cpp=
#include<bits/stdc++.h>
using namespace std;
signed main() {
    ios_base::sync_with_stdio(0), cin.tie(0);
    int n;
    cin>>n;
    vector<vector<int>> dp(3, vector<int>(100010, 0));
    cin>>dp[0][1]>>dp[1][1]>>dp[2][1];
    for(int i=2;i<=n;i++) {
        cin>>dp[0][i]>>dp[1][i]>>dp[2][i];
        dp[0][i]+=max(dp[1][i-1], dp[2][i-1]); //ä¸èƒ½ç”±è‡ªå·±é€™é …è½‰ç§»
        dp[1][i]+=max(dp[0][i-1], dp[2][i-1]); //ä¸èƒ½ç”±è‡ªå·±é€™é …è½‰ç§»
        dp[2][i]+=max(dp[0][i-1], dp[1][i-1]); //ä¸èƒ½ç”±è‡ªå·±é€™é …è½‰ç§»
    }
    cout<<max(dp[0][n], max(dp[1][n], dp[2][n])); //æœ€å¾Œé‚„è¦çœ‹æ˜¯é¸å“ªå€‹æ¯”è¼ƒå¥½
}
```
:::
## å¸¸è¦‹çš„$DP$é¡Œç›®
### æ±‚æ–¹æ³•æ•¸
é¡Œç›®é€šå¸¸æœƒçµ¦ä½ ä¸€äº›é™åˆ¶ï¼Œå•ä½ åˆ°ç¬¬$n$é …çš„æ–¹æ³•æœ‰å¹¾ç¨®ï¼Œè·Ÿæ©Ÿç‡é¡ä¼¼ã€‚
### æ‰¾æœ€ä½³è§£
çµ¦ä½ ä¸€äº›é™åˆ¶ï¼Œå•ä½ åœ¨æ»¿è¶³é€™äº›é™åˆ¶çš„æƒ…æ³æœ€å¤šå¯ä»¥ç²å¾—å¤šå°‘åˆ†æ•¸ã€‚

## ä¾‹é¡Œ [atcoder DP contest H](https://atcoder.jp/contests/dp/tasks/dp_h)
> æœ‰ä¸€å€‹ç”± $H$ è¡Œå’Œ $W$ åˆ—çµ„æˆçš„ç¶²æ ¼ã€‚æˆ‘å€‘ç”¨ $(i, j)$ è¡¨ç¤ºç¬¬ $i$ è¡Œï¼ˆå¾ä¸Šå¾€ä¸‹æ•¸ï¼‰å’Œç¬¬ $j$ åˆ—ï¼ˆå¾å·¦å¾€å³æ•¸ï¼‰çš„æ–¹æ ¼ã€‚
å°æ–¼æ¯å€‹ $i$ å’Œ $j$ $ï¼ˆ1\le i\le H, 1 \le j\le Wï¼‰$ï¼Œæ–¹æ ¼ $(i, j)$ ç”±ä¸€å€‹å­—å…ƒ $a_{i,j}$ æè¿°ã€‚å¦‚æœ $a_{i,j}$ æ˜¯ `.`ï¼Œå‰‡æ–¹æ ¼ $(i, j)$ æ˜¯ç©ºæ–¹æ ¼ï¼›å¦‚æœ $a_{i,j}$ æ˜¯ `#`ï¼Œå‰‡æ–¹æ ¼ $(i, j)$ æ˜¯ç‰†å£æ–¹æ ¼ã€‚ä¿è­‰æ–¹æ ¼ $(1,1)$ å’Œ $(H,W)$ éƒ½æ˜¯ç©ºæ–¹æ ¼ã€‚
å¤ªéƒå°‡å¾æ–¹æ ¼ $(1,1)$ é–‹å§‹ï¼Œé€šéä¸æ–·å‘å³æˆ–å‘ä¸‹ç§»å‹•è‡³ç›¸é„°çš„ç©ºæ–¹æ ¼ï¼Œæœ€çµ‚åˆ°é”æ–¹æ ¼ $(H,W)$ã€‚
è«‹æ‰¾å‡ºå¾æ–¹æ ¼ $(1,1)$ åˆ°æ–¹æ ¼ $(H,W)$ çš„æ‰€æœ‰å¯èƒ½è·¯å¾‘æ•¸é‡ã€‚ç”±æ–¼ç­”æ¡ˆå¯èƒ½éå¸¸å¤§ï¼Œè«‹ä»¥ $\bmod(10^9 + 7)$ å¾Œè¼¸å‡ºçµæœã€‚
> $1\le W, H \le 1000$
> $a_{i, j}=$ `.` æˆ– `#`
> ![image](https://hackmd.io/_uploads/B1BvJxSUJl.png)

æˆ‘å€‘å¯ä»¥å®šç¾© $DP_{i, j}$ æ˜¯èµ°åˆ°ç¬¬ $i$ è¡Œç¬¬ $j$ åˆ—çš„æ–¹æ³•æ•¸$\bmod 10^9+7$ï¼Œè€Œä¸” $DP_{1, 1}=1$ï¼Œå› ç‚ºæ˜¯å¾é€™æ ¼å‡ºç™¼ï¼Œç”±æ–¼èµ°åˆ°ç¬¬ $i$ è¡Œç¬¬ $j$ åˆ—ä¹‹å¾Œåªèƒ½å¾€å³æˆ–å¾€ä¸‹èµ°ï¼Œä¹Ÿå°±æ˜¯èªª $DP_{i, j}$ æ‡‰è©²è¦å¾å®ƒå·¦é‚Šå’Œä¸Šé¢çš„æ ¼å­è½‰ç§»ï¼Œå› ç‚ºåªæœ‰é€™å…©æ ¼å¯ä»¥èµ°åˆ°ç¬¬ $i$ è¡Œç¬¬ $j$ åˆ—ï¼Œæ‰€ä»¥å¯ä»¥æ¨å‡ºè½‰ç§»å¼æ˜¯
> $DP_{1, 1}$=1
> $DP_{0, 1\sim W}=0ï¼ŒDP_{1\sim H, 0}=0$ å› ç‚ºæ ¹æœ¬åˆ°ä¸äº†ã€‚
> $DP_{i, j}=(DP_{i-1, j}+DP_{i, j-1}) \bmod 10^9+7$

ä½†æ˜¯å¦‚æœ$a_{i,j}$ æ˜¯ `#` é‚£é€™æ ¼æ ¹æœ¬åˆ°ä¸äº†æ‰€ä»¥ä¸èƒ½ç”¨ $DP_{i, j}$ ä¾†è½‰ç§»ã€‚å®Œæ•´çš„è½‰ç§»å¼æ‡‰è©²è¦æ˜¯é€™æ¨£
> $DP_{1, 1}$=1
> $DP_{0, 1\sim W}=0ï¼ŒDP_{1\sim H, 0}=0$ å› ç‚ºæ ¹æœ¬åˆ°ä¸äº†ã€‚
> $if a_{i,j} \not=$ #  $DP_{i, j}=(DP_{i-1, j}+DP_{i, j-1}) \bmod 10^9+7$
> $else$ $DP_{i, j}=0$

:::spoiler AC-CODE
```cpp=
#include<bits/stdc++.h>
using namespace std;
signed main() {
    int n, m, mod=1e9+7;
    cin>>n>>m;
    vector<vector<int>> dp(1010, vector<int> (1010, 0)); //ä¸€é–‹å§‹å…ˆåˆå§‹åŒ–ç‚º0
    vector<vector<char>> adj(1010, vector<char> (1010, ' '));
    for(int i=1;i<=n;i++) {
        for(int j=1;j<=m;j++) {
            cin>>adj[i][j];
        }
    }
    dp[1][1]=1;
    for(int i=1;i<=n;i++) {
        for(int j=1;j<=m;j++) {
            if(adj[i][j]=='.') dp[i][j]+=(dp[i][j-1]+dp[i-1][j])%mod; //å¯ä»¥èµ°æ‰è½‰ç§»
        }
    }
    cout<<dp[n][m];
}
```
:::
é€™é¡Œæ˜¯ $2D0D$ çš„ $DP$ï¼Œå› ç‚ºç¸½å…±æœ‰ $n^2$ å€‹ç‹€æ…‹ï¼Œæ¯å€‹ç‹€æ…‹éœ€è¦å…©å€‹å­ç‹€æ…‹ä¾†è½‰ç§»ï¼Œæ™‚é–“è¤‡é›œåº¦æ˜¯ $O(n^2)$ã€‚

## ä¾‹é¡Œ LIS(æœ€é•·éå¢å­åºåˆ—)
> æœ‰ä¸€å€‹é™£åˆ— $a[1], a[2], a[3], ...a[N-1], a[N]$ï¼Œé¸æ“‡ä¸€å€‹ä»–çš„å­åºåˆ—ï¼Œå­åºåˆ—éœ€è¦æ»¿è¶³é™¤äº†ç¬¬ä¸€é …å¤–ï¼Œæ¯ä¸€é …éƒ½å¿…é ˆå¤§æ–¼å‰é …ï¼Œæ±‚æœ€é•·çš„å­åºåˆ—é•·åº¦ã€‚
> * å­åºåˆ—å®šç¾©
> 
> å­åºåˆ—æ˜¯é¸æ“‡åŸé™£åˆ—çš„ä¸€äº›å…ƒç´ ï¼Œåœ¨ä¸æ”¹è®Šé¸æ“‡çš„å…ƒç´ çš„ç›¸å°ä½ç½®çš„æƒ…æ³æ‰€å½¢æˆçš„åºåˆ—ã€‚
> * é™åˆ¶
> 
>  $1 \le N \le 2000$
>  
> e.g. `4 7 6` æ˜¯`4 8 7 6 3`çš„å­åºåˆ—ä½†`4 3 6`ä¸æ˜¯ã€‚
> ![image](https://hackmd.io/_uploads/HkNesgBI1l.png)

å¦‚æœæŠŠç‹€æ…‹å®šç‚º $DP_i$ ç‚ºåˆ°ç¬¬ $i$ é …æ‰€èƒ½å¾—åˆ°çš„æœ€é•·å­åºåˆ—é•·åº¦ï¼Œæ„Ÿè¦ºæ˜¯å°çš„ä½†ä»”ç´°æƒ³æƒ³åˆè¨±å¤šå•é¡Œï¼Œå¯ä»¥ç™¼ç¾ $DP_i$ ä¸ä¸€å®šæœƒåŒ…å« $a_i$ï¼Œä½†åˆ° $DP_j$ çš„æ™‚å€™ï¼Œéœ€è¦ä¿è­‰ç”¨ä¾†è½‰ç§»ç‹€æ…‹çš„ LIS çš„æœ€å¾Œä¸€é …å¿…é ˆå°æ–¼ $a_j$ï¼Œå¯æ˜¯æ ¹æ“šç‹€æ…‹çš„å®šç¾©ï¼Œæˆ‘å€‘ç„¡æ³•ç¢ºå®šç”¨ä¾†è½‰ç§»çš„ LIS æ‰€é¸çš„æœ€å¾Œä¸€é …æ˜¯ç”šéº¼ï¼Œæ‰€ä»¥æˆ‘å€‘ç„¡æ³•é€éé€™å€‹ç‹€æ…‹ä¾†åšè½‰ç§»ã€‚

é‚£æ‡‰è©²æ€éº¼è½‰ç§»å‘¢ ?
:::spoiler çœŸçš„æƒ³ä¸åˆ°å†æ‰“é–‹
### æŠŠç‹€æ…‹å®šç‚º $DP_i$ ç‚ºï¼Œå¿…é ˆé¸æ“‡ $a_i$ ç•¶LISçš„æœ€å¾Œä¸€é …ï¼Œè€Œä¸”åˆ°ç¬¬ $i$ é …æ‰€èƒ½å¾—åˆ°çš„æœ€é•·å­åºåˆ—é•·åº¦ã€‚
è½‰ç§»åˆ° $DP_j$ çš„æ™‚å€™ï¼Œå¯ä»¥ç”±æ»¿è¶³ $i<j$ ä¸” $a_i<a_j$ çš„ä»»æ„ä¸€é … $DP_i$ è½‰ç§»ï¼Œéå¸¸é¡¯ç„¶ä¸€å®šæ˜¯ç”± LIS é•·åº¦æœ€é•·çš„ $DP_i$ è½‰ç§»
::: 
::: spoiler AC-CODE
```cpp=
#include<bits/stdc++.h>
using namespace std;
int main() {
    int n;
    cin>>n;
    int a[2010], dp[2010];
    for(int i=1;i<=n;i++) {
        dp[i]=1;
        cin>>a[i];
    }
    int ans=1;
    for(int i=2;i<=n;i++) {
        for(int j=1;j<i;j++) {
            if(a[i]>a[j]) {
                dp[i]=max(dp[i], dp[j]+1);
                ans=max(ans, dp[i]);
            }
        }
    }
    cout<<ans;
}
```
:::

é€™é¡Œæ˜¯ $1D1D$ çš„ $DP$ å› ç‚ºç¸½å…±æœ‰ $N$ å€‹ç‹€æ…‹ï¼Œæ¯å€‹ç‹€æ…‹æœ€å¤šå¯èƒ½ç”± $N-1$ å€‹ç‹€æ…‹ä¾†è½‰ç§»ï¼Œæ™‚é–“è¤‡é›œåº¦æ˜¯ $O(n^2)$ï¼Œé€™é¡Œå¯ä»¥å„ªåŒ–åˆ° $O(n \log n)$ ä½†é€™ä¸¦ä¸å†é€™ä¸€ç« ç¯€çš„å…§å®¹ï¼Œå¦‚æœæœ‰èˆˆè¶£çš„å¯ä»¥æƒ³çœ‹çœ‹ã€‚

## ä¾‹é¡Œ [LCS](https://atcoder.jp/contests/dp/tasks/dp_f)
> çµ¦å®šå­—ä¸² $s$ å’Œ $t$ï¼Œæ‰¾å‡ºå®ƒå€‘çš„ä¸€å€‹æœ€é•·å…±åŒå­åºåˆ—ã€‚ 
> * æ³¨æ„äº‹é … 
> 
>å­—ä¸² $x$ çš„å­åºåˆ—æ˜¯é€šéå¾ $x$ ä¸­ç§»é™¤é›¶å€‹æˆ–å¤šå€‹å­—å…ƒï¼Œä¸¦æŒ‰åŸé †åºé€£æ¥å‰©é¤˜å­—å…ƒå¾—åˆ°çš„å­—ä¸²ã€‚ 
>* é™åˆ¶æ¢ä»¶ 
>
>$s$ å’Œ $t$ æ˜¯åƒ…ç”±å°å¯«è‹±æ–‡å­—æ¯çµ„æˆçš„å­—ä¸²ã€‚ 
>$1 \leq |s|, |t| \leq 3000$ã€‚
>
>ç¯„ä¾‹ : abcde abdff $\rightarrow$ LCSé•·åº¦ : 3

å¾ˆç›´è¦ºçš„æƒ³æ³•æ˜¯ $dp_{i, j}$ æ˜¯ $s$ çš„å‰ $i$ å€‹å­—å…ƒå’Œ $t$ çš„å‰ $j$ å€‹å­—å…ƒçš„ LCSé•·åº¦ã€‚

ä½†æ˜¯å¦‚æœ $s_i==t_j$ é‚£ LCS é•·åº¦æ‡‰è©²è¦ +1ï¼Œä½†æ˜¯ä¸çŸ¥é“è©²æ€éº¼è½‰ç§»ã€‚

å¦‚æœ $s_i==t_j\ \text{AND  } s_i==t_{j+1}$ ï¼ŒLCS çš„é•·åº¦å¾ˆæ˜é¡¯ä¸èƒ½ +2 ï¼Œå› ç‚ºä¸èƒ½é¸æ“‡ $s_i$ å…©æ¬¡ï¼Œæ‰€ä»¥å¦‚æœ $s_i==t_j$ é‚£ $dp_{i, j}=dp_{i-1,j-1}+1$ï¼Œé€™æ¨£å°±å¯ä»¥ä¿è­‰ä¸æœƒé¸åˆ°é‡è¦†çš„ã€‚

å¦‚æœ $s_i\not=t_j$ï¼Œé‚£ $dp_{i, j}=\max(dp_{i-1,j},dp_{i,j-1})$ï¼Œå› ç‚º $dp_{i-1,j}$, $dp_{i,j-1}$ æ ¹æ“šå®šç¾©æ˜¯èƒ½è½‰ç§»åˆ°çš„æœ€é•· LCSã€‚

åœ– from [Yui Huang æ¼”ç®—æ³•å­¸ç¿’ç­†è¨˜](https://yuihuang.com/dp-lcs/)
![image](https://hackmd.io/_uploads/Bk8PXJYLyl.png)
::: spoiler AC-CODE
```cpp=
#include<bits/stdc++.h>
using namespace std;
signed main() {
    string s, t;
    cin>>s>>t;
    s=" "+s; //æ–¹ä¾¿å¯¦ä½œ
    t=" "+t; //æ–¹ä¾¿å¯¦ä½œ
    vector<vector<int>> dp(1010, vector<int>(1010, 0));
    for(int i=1, l=s.size();i<l;i++) {
        for(int j=1, len=t.size();j<len;j++) {
            if(s[i]==t[j]) dp[i][j]=dp[i-1][j-1]+1;
            else dp[i][j]=max(dp[i-1][j], dp[i][j-1]);
        }
    }
    cout<<dp[s.size()-1][t.size()-1];
}

```
:::
## ä¾‹é¡Œ [01èƒŒåŒ…](https://atcoder.jp/contests/dp/tasks/dp_d)
>çµ¦ä¸€å€‹å®¹é‡ç‚º $M$ çš„èƒŒåŒ…ï¼Œé‚„æœ‰ $N$ å€‹ç‰©å“ï¼Œç¬¬ $i$ å€‹ç‰©å“çš„é«”ç©æ˜¯ $a_i$ ï¼Œåƒ¹å€¼æ˜¯ $b_i$ï¼Œé¸æ“‡ä¸€äº›ç‰©å“æ”¾åˆ°èƒŒåŒ…ä¸­ã€‚æ±‚åœ¨ç¸½é«”ç©ä¸è¶…éèƒŒåŒ…å®¹é‡ï¼Œæ‰€èƒ½ç²å¾—çš„æœ€å¤§åƒ¹å€¼ã€‚
>
> * é™åˆ¶æ¢ä»¶
>
> $1 \le M \le 100$, $1 \le N \le 10^5$, $1 \le a_i, b_i \le 10^7$

### æš´åŠ›æ³•
æ¯ä¸€é …éƒ½é¸æˆ–ä¸é¸ï¼Œå†åˆ¤æ–·ç¸½é«”ç©å°æ–¼ç­‰æ–¼ $M$ çš„æœ€å¤§åƒ¹å€¼ï¼Œæ™‚é–“è¤‡é›œåº¦æ˜¯ $O(2^N)$ã€‚

ä¼¼ä¹å°±ç®—å‰ªæä¹Ÿä¸å¤ªå¯è¡Œã€‚

### DP
æŠŠç‹€æ…‹å®šç¾©ç‚º $DP_{i, W}$ ç‚ºåªé¸æ“‡å‰ $i$ å€‹ç‰©å“ä¸”ç¸½é«”ç©å°æ–¼ç­‰æ–¼ $W$ æ‰€èƒ½ç²å¾—çš„æœ€å¤§åƒ¹å€¼ã€‚

å¦‚æœé¸äº†ç¬¬ $i$ é …é‚£ $DP_{i, W}=DP_{i-1, W-a_i}+b_i$ï¼Œå¦‚æœä¸é¸ç¬¬ $i$ é …é‚£ $DP_{i, W}=DP_{i-1, W}$ã€‚

> $$
> DP_{i, w} = \max (DP_{i-1, W-a_i}+b_i, DP_{i, W}=DP_{i-1, W})
> $$

æ™‚é–“è¤‡é›œåº¦æ˜¯ $O(MN)$ã€‚

* å¯¦ä½œ
> åˆå§‹å€¼æ˜¯ 0ï¼ˆä¸é¸ä»»ä½•æ±è¥¿ï¼‰ã€‚
> ç•¶ $w<a_i$ æ™‚ä¸èƒ½é¸ç¬¬ ğ‘– å€‹ç‰©å“ã€‚
:::spoiler AC-CODE
```cpp=
#include<bits/stdc++.h>
using namespace std;
// å¯ä»¥ä¸ç”¨é–‹long long å› ç‚º100*10^7<2^32-1
signed main() {
    int m, n;  //mæ˜¯å®¹é‡, næ˜¯å€‹æ•¸
    cin>>n>>m;
    vector<vector<int>> dp(110, vector<int>(10010, 0));
    vector<int> a(n+1, 0), b(n+1, 0);
    for(int i=1;i<=n;i++) cin>>a[i]>>b[i];
    for(int i=1;i<=n;i++) {
        for(int j=0;j<=m;j++) {
            if(j>=a[i]) {
                dp[i][j]=max(dp[i-1][j], dp[i-1][j-a[i]]+b[i]);
            }
            else dp[i][j]=dp[i-1][j];
        }
    }
}
```
:::

å…¶å¯¦èƒŒåŒ…å•é¡Œé‚„æœ‰ç„¡é™èƒŒåŒ…é‚„æœ‰æœ‰é™èƒŒåŒ…ï¼Œä½†ç­†è€…æƒ³å¤šä»‹ç´¹ä¸€äº›ä¸åŒæ€è·¯çš„ $DP$ï¼Œå¦‚æœæœ‰èˆˆè¶£çš„å¯ä»¥è‡ªå·±ä¸Šç¶²æ‰¾çœ‹çœ‹ã€‚

## ä¾‹é¡Œ æ—…è¡Œæ¨éŠ·å“¡å•é¡Œ
>æœ‰ $N$ æ£Ÿæˆ¿å­ï¼Œç·¨è™Ÿæ˜¯ $0 \sim N-1$ï¼Œæˆ¿å­ $i$ å’Œæˆ¿å­ $j$ çš„è·é›¢æ˜¯ $a[i][j]$ï¼Œæœ‰ä¸€å€‹æ¨éŠ·å“¡è¦å¾æˆ¿å­ $0$ å‡ºç™¼ï¼Œç¶“éæ¯é–“æˆ¿å­æ°å¥½ä¸€æ¬¡å†å›åˆ°æˆ¿å­ $0$ï¼Œè«‹å•ä»–æœ€çŸ­è¦èµ°å¤šé ?
> 
> * é™åˆ¶æ¢ä»¶
>
> $2 \le N \le 17$, $0 \le a[i][j] \le 10^7$, $a[i][j]=a[j][i]$, $a[i][i]=a[i][i]$

### æšèˆ‰æ³•
æ’åˆ— $0 \sim N-1$ çš„æ‰€æœ‰å¯èƒ½ï¼Œæ™‚é–“è¤‡é›œåº¦æ˜¯ $O(N!)$ï¼Œ$17! \approx 3.5 \times 10^{14}$ã€‚

é¡¯ç„¶ä¸ç¬¦åˆæ‰€æ±‚ã€‚

### DP
$DP_{i,[vis_{N-1}][vis_{N-2}][vis_{N-3}]...[vis_0]}$ ç‚ºç›®å‰åœ¨ $i$ï¼Œ$vis_j$ æ˜¯ $0 \text{ or } 1$ï¼Œè¡¨ç¤ºæ˜¯å¦å»é $j$ã€‚

* å¯¦ä½œ
>å¯¦ä½œä¸­ï¼Œå¸¶è‘—ä¸€å€‹18ç¶­çš„é™£åˆ—è½‰ç§»ä¼¼ä¹æœ‰é»å¤ªé›£äº†ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ç‹€æ…‹å£“ç¸®ã€‚
>å¯ä»¥ç™¼ç¾ï¼Œå› ç‚ºåªè¦è¨˜éŒ„æ¯å€‹æˆ¿å­æ˜¯å¦å»éï¼Œæ‰€ä»¥è¦ç”¨äºŒé€²ä½ç”¨ä¸€å€‹`int`è¡¨é”ã€‚

### ç‹€æ…‹å£“ç¸®
$$DP_{i,[vis_{N-1}][vis_{N-2}][vis_{N-3}]...[vis_0]}\rightarrow DP_{i, [vis_{N-1}vis_{N-2}vis_{N-3}...vis_0]}$$

e.g.

$$DP_{4, [1][0][1][0]} \rightarrow DP_{4, [{(1010)}_2]}$$

#### ä½å…ƒé‹ç®—
è¨­å·²ç¶“èµ°éçš„äºŒé€²ä½é›†åˆç‚º $S={(1010)_2}$ï¼Œ$S$ ä»£è¡¨å·²ç¶“å»éäº†ç¬¬1é–“å’Œç¬¬3é–“ã€‚
> $S \&(1<<j)$
(å³åˆ¤æ–· $S$ åœ¨äºŒé€²åˆ¶ä¸‹å¾å³æ•¸ä¾†ç¬¬ $j+1$ ä½æ˜¯å¦ç‚º1)
> ç”¨æ–¼æª¢æŸ¥é» $j$ æ˜¯å¦åœ¨é›†åˆå…§ã€‚
> $\text{if }S \&(1<<J)==1$ï¼Œä»£è¡¨é» $J$ å·²ç¶“å»éã€‚
> $\text{else}$ é» $J$ æ²’æœ‰å»éã€‚
>e.g.
>$S=$<font color="#ff0000">$1010$</font>
>$1<<3$ $=$ <font color="#ff0000">$1$</font>$000$
>$S\&1<<3=1$ 
>$S-(1<<3)=0010 \rightarrowå¯ä»¥ç”¨æ¸›æ³•æŠŠé»3ç§»é™¤é›†åˆ$
> $(1<<N)-1$ å°±æ˜¯å»éæ‰€æœ‰é»çš„é›†åˆã€‚

:::spoiler AC-CODE
å¯èƒ½éœ€è¦ç†è§£ä¸€ä¸‹
```cpp=
#include<bits/stdc++.h>
using namespace std;
const int INF=1e9;
signed main() {
    int n, ans=1e9;
    vector<vector<int>> a(17, vector<int>(17, 0)), dp(131072, vector<int>(17, INF));
    for(int i=0;i<n;i++) {
        for(int j=0;j<n;j++) {
            cin>>a[i][j];
        }
    }
    dp[1][0]=0; //å¾2^0å‡ºç™¼ï¼Œç›®å‰åœ¨ç¬¬0é–“ï¼Œè·é›¢è¨­å®šç‚º0ã€‚
    for(int i=0;i<(1<<n);i++) { //æšèˆ‰æ‰€æœ‰å¯èƒ½çš„é›†åˆã€‚
        for(int j=0;j<n;j++) { //æšèˆ‰ç›®å‰å¯èƒ½åœ¨å“ªä¸€é–“ã€‚
            if(i&(1<<j)) { //è¦é» j æœ‰åœ¨ ç›®å‰å»éçš„é›†åˆä¸­ã€‚
                for(int k=0;k<n;k++) {
                    if((i&(1<<k))&&j!=k) { //å¯ä»¥æšèˆ‰ä¸Šä¸€é–“æˆ¿å­å»å“ªè£¡ï¼Œè¨ˆç®—æœ€çŸ­è·é›¢ã€‚
                        dp[i][j]=min(dp[i][j], dp[i-(1<<j)][k]+a[j][k]);
                    }
                }
            }
        }
    }
    for(int i=1;i<n;i++) ans=min(ans, dp[(1<<n)-1][i]+a[i][0]); //æšèˆ‰æ‰€æœ‰å¯èƒ½çš„ç­”æ¡ˆ(æœ€å¾Œåœ¨å“ªä¸€é–“æˆ¿å­çš„ç¸½è·é›¢+é‚£ä¸€é–“æˆ¿å­åˆ°é»0çš„è·é›¢)
    cout<<ans;
}
:::

æ™‚é–“è¤‡é›œåº¦ç”± $O(N!)$ å£“ç¸®åˆ° $O(N^22^N)$

## ä¾‹é¡Œ [$\text{Slimes}$](https://atcoder.jp/contests/dp/tasks/dp_n)
> æœ‰ $N$ å€‹å²èŠå§†æ’æˆä¸€æ’ï¼Œç¬¬ $i$ éš»å²èŠå§†çš„å¤§å°æ˜¯ $a[i]$ ã€‚æ¯æ¬¡æŒ‘é¸å…©éš»ç›¸é„°çš„å²èŠå§†çµåˆåœ¨ä¸€èµ·ï¼Œå¤§å°è®Šæˆå…©éš»å²èŠå§†çš„å¤§å°ç›¸åŠ ï¼Œè€ŒèŠ±è²»ä¹Ÿæ˜¯å…©éš»å²èŠå§†çš„å¤§å°ç›¸åŠ ï¼Œå…¶ä»–å²èŠå§†çš„ç›¸å°é †åºä¸è®Šï¼Œç¶“é $N-1$ æ¬¡çµåˆï¼Œæ‰€æœ‰çš„å²èŠå§†æœƒè¢«åˆåœ¨ä¸€èµ·ï¼Œæ±‚æœ€å°çš„èŠ±è²»ã€‚
> * é™åˆ¶æ¢ä»¶
>
> $1 \le N \le 400, 1\le a[i] \le 10^9$
> e.g.
> `1|2|3` $\rightarrow$ `1|5` $\rightarrow$ `6` $cost=2+3+1+5=11$
>`1|2|3` $\rightarrow$ `3|3` $\rightarrow$ `6` $cost=1+2+3+3=9$

æˆ‘å€‘å¯ä»¥è§€å¯Ÿåˆ°åœ¨ä»»ä½•æ™‚å€™ã€Œå²èŠå§†ä¸€å®šæ˜¯ç”±ä¸€å€‹é€£çºŒçš„å€æ®µæ‰€çµ„æˆï¼Œè€Œä¸”å…¶å¤§å°ç‚ºé€™å€‹å€é–“çš„å’Œã€‚ã€ä»¥åŠã€Œå¦‚æœè¦ä½¿ç”¨å€é–“ $[L, R]$ åˆæˆå²èŠå§†ã€‚ä¸€å®šæ˜¯ç”±å€é–“ $[L, K]$ å’Œå€é–“ $[K+1, R]$ çµ„æˆã€‚ã€

æ‰€ä»¥å¯ä»¥æŠŠå­å•é¡Œå®šç¾©æˆã€ŒæŠŠé™£åˆ—çš„å­å€é–“åˆæˆæˆä¸€å€‹æœ€å¤§å²èŠå§†çš„æœ€å°èŠ±è²»ã€‚ã€

### DP
å®šç¾©$DP_{L, R}$ç‚ºæŠŠç¬¬ $L$ éš»åˆ°ç¬¬ $R$ éš»çš„å²èŠå§†éƒ½åˆæˆçš„æœ€å°ç¸½èŠ±è²»ã€‚

$$
DP_{L, R}=\\
\begin{cases} 
0 \text{        if L=R}\\
DP_{L, K}+DP_{K+1, R}+\sum_{i=L}^Ra[i] \text{    otherwise}
\end{cases}
$$

* è¨ˆç®—$\sum_{i=L}^Ra[i]$
> ä½¿ç”¨å‰ç¶´å’Œ$b[i]=b[i-1]+a[i]$ã€‚$\sum_{i=L}^Ra[i]=b[R]-b[L-1]$ å¯ä»¥ $O(1)$ è¨ˆç®—å€é–“å’Œã€‚
* å¯¦ä½œ

å¯¦ä½œä¸Šéœ€è¦æ³¨æ„å¦‚æœç”± $1\sim N$ æšèˆ‰å·¦å³ç•Œé€²è¡Œè½‰ç§»æ˜¯ä¸è¡Œçš„ï¼Œå› ç‚ºè¨ˆç®— $dp_{L, R}$æ™‚ $dp_{L+1, R}$ é‚„æ²’è¨ˆç®—ã€‚
:::spoiler AC-CODE
```cpp=
#include<bits/stdc++.h>
using nmaespace std;
#define int long long
const int INF=2e18;
vector<int> a(410, 0), b(410, 0);
vector<vector<int>> dp(410, vector<int>(410, INF))
signed main() {
    int n;
    cin>>n;
    for(int i=1;i<=n;i++) cin>>a[i];
    for(int i=1;i<=n;i++) b[i]=b[i-1]+a[i];
    for(int i=1;i<n;i++) {
        for(int j=1;j+i<=n;j++) {
            int l=i, r=j+i;
            for(int k=l;k<r;k++) {
                dp[l][r]=min(dp[l][r], dp[l][k]+dp[k+1][r]+b[r]-b[l-1]);
            }
        }
    }
    cout<<dp[1][n];
}
```
:::

## ç·´ç¿’é¡Œ
$DP$ çš„ç·´ç¿’æ–¹æ³•çœŸçš„åªèƒ½å¤šç·´ï¼Œæœ¬ç« éƒ¨åˆ†ä¾‹é¡Œä¾†è‡ª[Atcoder Educational DP Contest](https://atcoder.jp/contests/dp/tasks)ã€‚å¦‚æœæƒ³è¦ç·´ç¿’ä¹Ÿå¯ä»¥ä¾†é€™çœ‹çœ‹ã€‚

ä¹Ÿå¯ä»¥å» [$\text{Codeforces}$](https://codeforces.com/problemset?order=BY_RATING_ASC&tags=dp) æˆ³æˆ³çœ‹ä¸€äº› $DP$ é¡Œç›®